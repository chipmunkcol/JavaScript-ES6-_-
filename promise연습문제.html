<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
</head>
<body>
    <img id="test" src="https://codingapple1.github.io/kona.jpg">
    <script>
    
    // Q1. <img> 이미지 로딩 성공시 특정 코드를 실행하고 싶습니다. 
    let promise = new Promise((성공, 실패)=>{
        let img = document.querySelector('#test')
        // console.log(img)
        img.addEventListener('load', ()=>{
            성공();
        });
        img.addEventListener('error', ()=>{
            실패();
        }) 
    })
    
    promise.then(()=>{
        // console.log('성공')
    }).catch(()=>{
        console.log('실빼애애액!!!!!')
    })
        

// Q2.Ajax 요청이 성공하면 무언가 코드를 실행하고 싶습니다. 
    let promise2 = new Promise((성공, 실패)=>{
         $.ajax({
            type: 'get',
            url: 'https://codingapple1.github.io/hello.txt',
            success: (res)=>{
                성공(res);
            },
            error: (err)=>{
                실패(err);
            }
        })
        // console.log(res)
    })

    promise2.then((res)=>{
        // console.log(res)
    }).catch((err)=>{
        console.log(err)
    })
    
// Q3. Promise chaining 
    let promise3 = new Promise((성공, 실패)=>{
        $.ajax({
            type:'get',
            url:'https://codingapple1.github.io/hello2.txt',
            success:(res)=>{
                성공(res);
            },
            error:(err)=>{
                실패(err)
            }
        })
    })

    promise2.then((res)=>{
        console.log('1st Ajax요청 성공!'+ res);
        promise3.then((res)=>{
            console.log('2nd Ajax요청 성공~' + res)
        }).catch((err)=>{console.log('2nd 실패히힝')})
    }).catch((err)=>{
        console.log('1st 실패히히힝' + err)
    })

    </script>
      
</body>
</html>
  